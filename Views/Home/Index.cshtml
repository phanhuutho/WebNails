@{
    ViewBag.Title = ViewBag.Name;
    var showCoupon = (bool)ViewBag.ShowCoupon;
    var Coupons = (List<WebNails.Models.CouponModel>)ViewBag.Coupons;
    Coupons = Coupons.Where(x => x.Src != "" && x.Status).ToList();
}
@section css{
    <link href="~/Content/css/animate.min.css" rel="stylesheet">
    <link href="~/Content/css/slick.css" rel="stylesheet">
    <link href="~/Content/css/slick-theme.css" rel="stylesheet">
    <link href="~/Content/css/slider.css" rel="stylesheet">
    <link href="~/Content/css/page-home.css" rel="stylesheet">
}
<main>
    @{ Html.RenderPartial("_SliderHome_1"); }
    @{ Html.RenderPartial("_Home_About_Us_2"); }
    @{ Html.RenderPartial("_Home_Drinks_2"); }
    @{ Html.RenderPartial("_Home_Beauty_Spa_2"); }
    @{ Html.RenderPartial("_Home_Services_1"); }
    @{ Html.RenderPartial("_Home_Business_Gift_1"); }
    @{ Html.RenderPartial("_Home_Google_Clients_1"); }
    @{ Html.RenderPartial("_Home_Contact_3"); }
    @{ Html.RenderPartial("_Home_Map_1"); }
</main>
@section modal{
    @if (showCoupon && Coupons.Count > 0)
    {
        var index = 1;
        <div class="modal fade" id="ModalCoupon" tabindex="-1" aria-labelledby="ModalCouponLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="slider-coupon">
                            @foreach(var item in Coupons)
                            {
                                <div class="coupon" @(index > 1 ? "style=display:none;" : "")>
                                    <img src="@item.Src" class="img-fluid" />
                                </div>
                                index++;
                            }
                        </div>
                    </div>
                </div>
            </div>
        </div>
    }

    <div class="modal fade" id="ModalService" tabindex="-1" aria-labelledby="ModalServiceLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body"></div>
            </div>
        </div>
    </div>
}
@section scripts{
    <script src="~/Content/js/slick.min.js"></script>
    <script src="~/Content/js/slick-animation.js"></script>
    <script type="text/javascript">
        ActiveMenu("menu-home");

        var sliderInit = $('.sliders');
        var sliderCoupon = $('.slider-coupon');

        $(document).ready(function () {

            sliderInit.slick({
                dots: false,
                infinite: true,
                slidesToShow: 1,
                arrows: false,
                autoplay: true,
                autoplaySpeed: 4000,
                fade: true,
                draggable: false,
                pauseOnFocus: false,
                pauseOnHover: false,
                touchMove: false
            });
            sliderInit.slickAnimation();

            sliderInit.on('touchstart', e => {
                sliderInit.slick('slickPlay');
            });

            @{ 
                if (showCoupon && Coupons.Count > 0) 
                { 
                    <text>
                    $("#ModalCoupon").modal("show");

                    $("#ModalCoupon").on('shown.bs.modal', function () {
                        $("#ModalCoupon .modal-body .slider-coupon .coupon").show();
                        sliderCoupon.slick({
                            dots: false,
                            infinite: true,
                            slidesToShow: 1,
                            arrows: false,
                            autoplay: true,
                            autoplaySpeed: 3000,
                            fade: true,
                            draggable: false,
                            pauseOnFocus: false,
                            pauseOnHover: false,
                            touchMove: false
                        });
                    });

                    sliderCoupon.on('touchstart', e => {
                        sliderCoupon.slick('slickPlay');
                    });
                    </text>
                }
            }

            $(".beauty-spa-item").on("click", function () {
                var title = $(this).find("[data-title]").attr("data-title");
                var description = $(this).find("[data-description]").attr("data-description");

                $(".modal-title", "#ModalService").html(title);
                $(".modal-body", "#ModalService").html(description);
                $("#ModalService").modal("show");
            });


            $('.slider-google-clients').slick({
                dots: false,
                infinite: true,
                arrows: true,
                autoplay: true,
                autoplaySpeed: 5000,
                draggable: false,
                slidesToShow: 5,
                pauseOnFocus: false,
                pauseOnHover: false,
                slidesToScroll: 1
            });
        });

        function readmore(obj) {
            var dots = $(obj).parents(".card-text").find(".dots");
            var moreText = $(obj).parents(".card-text").find(".more");
            var btnText = $(obj).parents(".card-text").find(".btn-read-more");

            if (dots.css('display') == 'none') {
                dots.css('display', 'inline');
                btnText.text("Read more");
                moreText.css('display', 'none');
            }
            else {
                dots.css('display', 'none');
                btnText.text("Hide");
                moreText.css('display', 'inline');
            }

            setTimeout(function () {
                dots.css('display', 'inline');
                btnText.text("Read more");
                moreText.css('display', 'none');
            }, 5000);
        }
    </script>
}